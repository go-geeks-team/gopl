### 2.3.4. Время жизни переменных

Время жизни переменной -- это интервал времени выполнения программы,
в течениии которого она существует.

Время жизни переменной уровня пакета равно времени работы всей программы.

Локальные же переменные, напротив, имеют динамическое время жизни:
новый экземпляр создаётся всякий раз, когда выполняется оператор объявления,
и переменная живёт до тех пор, пока она становится *недоступной*, после чего выделенная для неё памятьможет быть
использована снова.

Параметры и результаты функции являются локальными переменными -- они создаются всякий раз,
когда вызывается их функция.

Например, в фрагменте программы ```lissajous``` из раздела 1.4
```go
for t := 0.0; t < ccycles*2*math.Pi; t += res {
	x := math.Sin(t)
	y := math.Sin(t*freq + phase)
	img.SetColorIndex(size+int(x*size+0.5), size+int(y*size+0.5), blackIndex)
}
```
переменная t создаётся каждый раз в начале цикла for, а новые переменные x и y создаются на каждой итерации цикла.

Время жизни переменной определяется её доступностью и локальная переменная может пережить итерацию охватывающего цикла.
Она может продолжить существовать даже после возврата из охватывающей функции.

#### Куча и Стэк

Память выделяется в куче:
```go
var global *int
func f() {
	var x int
	x = 1
	global = &x
}
```
Потому что она остаётся доступной с помощью переменной ```global``` после возврящения из f,
несмотря на то что её объявили как локальную переменную.

Память выделяется в стеке:
```go
func g() {
	y := new(int)
	*y = 1
}
```
И наоборот, когда выполняется возврат из функции g, переменная *y становится недоступной,
 и выделенная для неё память может быть использована повторно.

Сохранение ненужных указателей на короткоживущие объекты внутри долгоживущих объектов,
в особенности в глобальных переменных, мешает сборщику мусора освобождать память,
выделенную для короткоживущих объектов.